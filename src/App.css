:root{
  /* Dark theme (default) */
  --bg-0: #0b1220;
  --bg-1: #0f1724;
  /* single background color used for page background to avoid visible bands */
  --bg: #0f1724;
  --card: rgba(255,255,255,0.03);
  --glass: rgba(255,255,255,0.04);
  --muted: #a8b3c2;
  --text: #e6eef8;
  --accent: #66d9ff;
  --accent-2: #7dd3fc;
  --positive: #7ee787;
  --shadow: rgba(2,6,23,0.6);
  /* Theme-aware helpers for borders/overlays so light theme can invert colors
     without changing many rules across the file. */
  --border: rgba(255,255,255,0.03);
  --border-2: rgba(255,255,255,0.04);
  --border-3: rgba(255,255,255,0.06);
  --header-overlay: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  --element-bg: rgba(0,0,0,0.08);
  --thumb-bg: rgba(255,255,255,0.04);
  --focus-ring: rgba(102,217,255,0.18);
  /* Heart icon color */
  --heart-color: #ef4444; /* red-500 */
}

/* Light theme overrides when applied to the root element (html.theme-light) */
.theme-light {
  --bg-0: #f7fafc;
  --bg-1: #eef2f7;
  --bg: #eef2f7; /* single flat background for light theme */
  --card: rgba(2,6,23,0.03);
  --glass: rgba(2,6,23,0.02);
  --muted: #556069;
  --text: #0b1220;
  --accent: #0ea5e9;
  --accent-2: #38bdf8;
  --positive: #16a34a;
  --shadow: rgba(2,6,23,0.06);
  /* Invert the helper vars for light theme so UI elements remain visible */
  --border: rgba(2,6,23,0.03);
  --border-2: rgba(2,6,23,0.04);
  --border-3: rgba(2,6,23,0.06);
  --header-overlay: linear-gradient(180deg, rgba(2,6,23,0.02), rgba(2,6,23,0.01));
  --element-bg: rgba(255,255,255,0.06);
  --thumb-bg: rgba(2,6,23,0.04);
  --focus-ring: rgba(14,165,233,0.18);
  --heart-color: #dc2626; /* slightly darker on light bg */
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  /* Use CSS variables so theme can switch by changing the root class */
  /* Use a single solid background color to avoid visible horizontal banding */
  background-color: var(--bg);
  background-image: none;
  color:var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  font-size:15px;
}

a{color:inherit;text-decoration:none}

.container{max-width:1080px;margin:0 auto;padding:20px}
/* Make container padding a bit smaller on narrow screens via media queries below */

/* Header */
.App-header{position:-webkit-sticky;position:sticky;top:0;z-index:30;background:var(--header-overlay);-webkit-backdrop-filter: blur(6px);backdrop-filter: blur(6px);border-bottom:1px solid var(--border)}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 20px}
.brand{font-weight:700;letter-spacing:0.4px;color:var(--accent);font-size:18px}
.brand .subtitle{display:block;font-size:12px;color:var(--muted);font-weight:500}
.nav{display:flex;gap:10px}
.nav a{padding:8px 12px;border-radius:10px;color:var(--muted);border:1px solid transparent}
.nav a.active{background:transparent;border-color:var(--border-2);color:var(--text)}

.footer{border-top:1px solid var(--border);color:var(--muted);padding:18px 0;margin-top:48px;text-align:center}

/* Toolbar */
.toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:12px 0 20px}
.level-tabs{display:flex;gap:8px}
.tab{background:transparent;color:var(--muted);border:1px solid var(--border);padding:8px 12px;border-radius:999px;cursor:pointer;transition:all .15s}
.tab.active{color:var(--text);border-color:rgba(109,122,138,0.12);background:var(--glass)}
.tab{transition: background-color .12s,color .12s,border-color .12s,transform .12s}
.tab:hover{background:var(--glass);border-color:var(--border-2);color:var(--text);transform:translateY(-2px)}
.search{flex:1;min-width:220px;background:transparent;color:var(--text);border:1px solid var(--border-2);border-radius:10px;padding:10px 12px}

/* Grid & Cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
.card{background:var(--card);border-radius:12px;padding:14px;border:1px solid var(--border);box-shadow:0 6px 18px var(--shadow);transition:transform .18s, box-shadow .18s}
.card:hover{transform:translateY(-6px);box-shadow:0 18px 36px rgba(2,6,23,0.7)}
.tips-page{padding:8px 0 36px}
.tips-page .lead{color:var(--muted);margin-bottom:18px;font-size:15px}
.tips-grid{display:grid;grid-template-columns:repeat(2,minmax(260px,1fr));gap:18px;align-items:start}
.tips-page .card{padding:18px;border-radius:14px;border:1px solid var(--border-2);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
.tips-page .card h2{margin-top:0;font-size:18px;color:var(--accent);font-weight:700}
.tips-page ul, .tips-page ol{margin:8px 0 0 18px;color:var(--muted)}
.tips-page li{margin-bottom:10px;line-height:1.6}
.tips-page .card::before{content:"";display:block;height:6px;width:56px;background:var(--accent);border-radius:6px;margin-bottom:12px}
.tips-page .card h2::before{display:none}

@media (max-width: 900px) {
  .tips-grid{grid-template-columns:1fr}
}

.card-title{font-weight:700;margin-bottom:8px;font-size:16px}
.card-sub{color:var(--accent-2);font-weight:600;margin-bottom:8px}
.card-desc{color:var(--muted);font-size:13px}
.card-title-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.icon-btn{background:transparent;border:1px solid var(--border);color:var(--muted);border-radius:8px;padding:6px 8px;cursor:pointer;transition:background-color .12s,color .12s,border-color .12s,transform .12s}
.icon-btn:hover{background:var(--glass);border-color:var(--border-2);color:var(--text);transform:translateY(-2px)}
.icon-btn.on{color:#ffd166;border-color:rgba(255,209,102,0.12);background:linear-gradient(180deg,rgba(255,209,102,0.03),transparent)}
.icon-btn svg{width:18px;height:18px;display:block}

/* Heart icon in footer */
.heart-icon{width:20px;height:20px;display:inline-block;vertical-align:middle;margin:0 8px;color:var(--heart-color)}
.theme-light .heart-icon{color:var(--heart-color)}
.chip{background:transparent;color:var(--text);border:1px solid var(--border);padding:8px 12px;border-radius:999px;cursor:pointer;transition:background-color .12s,color .12s,border-color .12s,transform .12s}
.chip:hover{background:var(--glass);border-color:var(--border-2);color:var(--text);transform:translateY(-2px)}
.chip.link{display:inline-block}

/* Rudiment Images */
.rudiment-img-wrap {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 10px;
}
.rudiment-img {
  width: 100%;
  max-width: 220px;
  /* Use aspect-ratio to keep consistent image boxes and avoid variable heights */
  aspect-ratio: 16 / 9;
  height: auto;
  object-fit: contain;
  border-radius: 10px;
  background: #191a1d;
  box-shadow: 0 2px 12px rgba(0,0,0,0.10);
  border: 1px solid var(--border-2);
  transition: transform 0.18s;
}

/* Fallback for browsers that don't support aspect-ratio (older iOS Safari):
   Use intrinsic ratio via padding on the wrapper and absolutely position the image. */
.rudiment-img-wrap{position:relative}
.rudiment-img-wrap::before{content:"";display:block;padding-top:56.25% /* 16:9 */;}
.rudiment-img{position:absolute;top:0;left:0;width:100%;height:100%;}
.rudiment-img-detail-wrap {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 24px 0 18px 0;
}
.rudiment-img-detail {
  width: 100%;
  max-width: 420px;
  height: 260px;
  object-fit: contain;
  border-radius: 16px;
  background: #191a1d;
  box-shadow: 0 4px 32px rgba(0,0,0,0.18);
  border: 1px solid var(--border-3);
}

.chip.done{background:transparent;border-color:rgba(126,231,135,0.08);color:var(--positive)}

/* Ensure no other hard overrides interfere. If the html element has .theme-dark explicitly, it's same as default. */
/* explicit dark class not required; default variables are dark */
.chip.done{background:transparent;border-color:rgba(126,231,135,0.08);color:var(--positive)}

/* Sticking Viewer */
.sticking-viewer{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.stick{display:inline-flex;align-items:center;justify-content:center;min-width:28px;height:28px;border-radius:8px;padding:0 8px;border:1px solid var(--border);background:var(--element-bg);font-weight:700}
.stick.right{color:var(--accent-2);background:linear-gradient(180deg, rgba(122,209,255,0.03), rgba(122,209,255,0.01))}
.stick.left{color:#ffb4c0;background:linear-gradient(180deg, rgba(255,180,192,0.02), rgba(255,180,192,0.01))}
.stick.accent{box-shadow:0 0 0 4px rgba(102,217,255,0.06)}
.stick.grace{opacity:0.75;transform:scale(0.95)}

/* Detail */
.detail .back{color:var(--muted);display:inline-block;margin:4px 0 8px}
.title{margin:6px 0;font-size:20px}
.tag{display:inline-block;background:transparent;color:var(--muted);border:1px solid var(--border);padding:6px 12px;border-radius:999px;margin-bottom:14px}
.desc{color:var(--muted);margin-bottom:12px}
.sticking{background:transparent;border-radius:10px;padding:12px;margin:16px 0}
.sticking-title{color:var(--muted);font-size:13px;margin-bottom:8px}
.sticking-body{font-size:18px;letter-spacing:1px}

.panel{background:transparent;border:1px solid var(--border);border-radius:12px;margin-top:16px}
.panel-title{padding:10px 12px;border-bottom:1px solid var(--border-2);font-weight:600}
.panel-body{padding:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}

/* Responsive rules - tablet and mobile */
@media (max-width: 1024px) {
  .container{padding:16px;}
  .header-inner{padding:10px 16px}
  .brand{font-size:16px}
  .grid{gap:14px}
  .card{padding:12px}
  .rudiment-img{max-width:200px;height:120px}
}

@media (max-width: 768px) {
  /* Header stacks on small screens */
  .header-inner{flex-direction:column;align-items:flex-start;gap:8px}
  .nav{width:100%;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}
  .nav a, .icon-btn{padding:8px 10px}
  .container{padding:14px}
  .grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
  .card{padding:12px}
  .brand .subtitle{display:none}

  /* Make the toolbar horizontally scrollable on narrow widths to avoid overflow */
  .toolbar{overflow-x:auto; -webkit-overflow-scrolling:touch; width:100%;}
  .toolbar::-webkit-scrollbar{height:8px}
  .toolbar::-webkit-scrollbar-thumb{background:var(--thumb-bg);border-radius:8px}
  .level-tabs{display:flex;gap:8px;flex-wrap:nowrap;min-width:0}
  .tab{white-space:nowrap}
}

@media (max-width: 480px) {
  .container{padding:12px}
  .grid{grid-template-columns:1fr;gap:12px}
  .card{padding:10px}
  .card-title{font-size:15px}
  .card-desc{font-size:12px}
  /* Reduce image vertical footprint on very small screens to avoid long empty blocks */
  .rudiment-img{max-width:180px;height:auto;max-height:90px;object-fit:contain}
  /* Remove the intrinsic-ratio pseudo element on mobile so wrappers don't reserve large vertical space */
  .rudiment-img-wrap::before{display:none}
  .rudiment-img{position:static;width:auto}
  .search{min-width:120px}
  .brand{font-size:15px}
  body{font-size:14px}
  .App-header{padding-bottom:6px}
}

.metronome input[type="range"]{width:220px}
.bpm{display:inline-block;min-width:40px;text-align:center;background:transparent;border:1px solid var(--border-2);border-radius:8px;padding:4px 8px;margin-left:10px}
.beat{width:14px;height:14px;border-radius:999px;background:var(--border)}
.beat.accent{background:var(--accent);box-shadow:0 0 0 8px rgba(102,217,255,0.06);transition:box-shadow 100ms}

/* Metronome enhanced layout */
.metronome{display:flex;gap:18px;align-items:center}
.panel-body.metronome{background:var(--card);padding:18px;border-radius:12px}
.metronome-left{flex:1;display:flex;flex-direction:column;align-items:center;gap:8px}
.bpm-display{font-size:44px;font-weight:800;color:var(--accent);background:transparent;padding:6px 12px;border-radius:8px}
.bpm-controls{display:flex;gap:8px}
.metronome-right{flex:1;display:flex;flex-direction:column;gap:10px}
.controls-row{display:flex;align-items:center;gap:12px}
.control-label{min-width:90px;color:var(--muted);font-weight:600}
.actions-row{margin-top:6px}
.icon-left{display:inline-flex;align-items:center;gap:8px}
.btn-icon{width:16px;height:16px}
.icon-btn svg{width:18px;height:18px}

/* Large BPM & visual layout similar to provided design */
.bpm-large{display:flex;align-items:baseline;gap:12px}
.bpm-large .bpm-display{font-size:96px;font-weight:900;padding:0;color:var(--accent)}
.bpm-large .bpm-unit{color:var(--accent);font-weight:700;margin-top:10px}
.tempo-desc{color:var(--muted);font-size:13px;letter-spacing:1px}
.slider-row{display:flex;align-items:center;gap:12px;width:100%;max-width:100%}
.bpm-slider{flex:1}
.round-btn{width:56px;height:56px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--border);background:transparent;color:var(--text);cursor:pointer;font-size:20px}
.round-btn:hover{background:var(--glass);transform:translateY(-2px)}
.controls-big{display:flex;align-items:center;gap:18px;margin-top:8px}
.tap-btn{min-width:140px;padding:18px 24px;border-radius:8px;background:var(--card);border:1px solid var(--border);font-weight:800;color:var(--accent);cursor:pointer}
.tap-btn:hover{transform:translateY(-2px);background:var(--glass)}
.play-circle{width:84px;height:84px;border-radius:999px;background:var(--text);display:flex;align-items:center;justify-content:center;border:0;box-shadow:0 8px 30px rgba(0,0,0,0.25);cursor:pointer}
.play-circle .play-icon{width:36px;height:36px;color:var(--accent)}
.first-beat{display:block;margin-top:10px;color:var(--muted);font-weight:700}
.accent-dots{display:flex;gap:8px;margin-top:12px}
.accent-dot{width:12px;height:12px;border-radius:999px;background:var(--border);display:inline-block}
.accent-dot.active{background:var(--accent);transform:scale(1.35);width:14px;height:14px;box-shadow:0 0 0 10px rgba(102,217,255,0.10);transition:transform .08s, box-shadow .08s, background .08s}
.accent-dot{width:12px;height:12px;border-radius:999px;background:var(--border);display:inline-block}
.subdiv-tiles{display:flex;gap:8px}
.tile{min-width:60px;height:60px;border-radius:8px;background:var(--element-bg);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer}
.tile.selected{background:var(--accent);color:#fff;border-color:transparent;box-shadow:0 8px 24px rgba(102,217,255,0.08)}
.tile .tile-icon{width:36px;height:36px;color:var(--muted);display:flex;align-items:center;justify-content:center}
.tile.selected .tile-icon{color:#fff}
.tile .tile-label{font-size:12px;color:var(--muted);margin-top:4px}
.bars-controls{display:flex;align-items:center;gap:8px;margin-left:12px}
.accent-count{min-width:36px;text-align:center}

@media (max-width:900px){
  .bpm-large .bpm-display{font-size:56px}
  .round-btn{width:44px;height:44px}
  .play-circle{width:68px;height:68px}
  .tap-btn{min-width:120px}
}

/* Mobile fixes to avoid horizontal overflow and keep the metronome inside margins */
@media (max-width:480px) {
  .panel-body.metronome{padding:12px}
  .bpm-large .bpm-display{font-size:44px}
  .bpm-large .bpm-unit{font-size:12px}
  .slider-row{gap:8px}
  .bpm-slider{min-width:0;flex:1}
  .round-btn{width:40px;height:40px;font-size:18px;padding:0}
  .play-circle{width:56px;height:56px}
  .tap-btn{min-width:100px;padding:10px}
  .controls-big{flex-wrap:wrap;justify-content:center}
  .subdiv-tiles{flex-wrap:wrap;justify-content:center}
  .tile{min-width:48px;height:48px;margin:6px}
  .panel{overflow:hidden}
  .metronome-left, .metronome-right{width:100%}
  .accent-dots{justify-content:center}
}

@media (max-width:900px){
  .metronome{flex-direction:column;align-items:stretch}
  .metronome-left,.metronome-right{width:100%}
  .bpm-display{font-size:36px}
}

.btn{background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent);color:var(--text);border:1px solid var(--border);padding:10px 14px;border-radius:10px;cursor:pointer;transition:background-color .12s,color .12s,border-color .12s,transform .12s,box-shadow .12s}
.btn:hover{transform:translateY(-2px);background:var(--glass);border-color:var(--border-2);box-shadow:0 10px 24px rgba(2,6,23,0.08)}
.btn-disabled{opacity:0.6;cursor:not-allowed}

.actions{margin-top:16px}

/* Skeleton loading UI */
.skeleton-card{position:relative;background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent);border:1px solid var(--border);box-shadow:0 4px 18px rgba(2,6,23,0.04);padding:14px;border-radius:12px}
.skeleton-img{width:100%;max-width:220px;border-radius:8px;background:linear-gradient(90deg,var(--card),var(--glass));position:relative;overflow:hidden}
.skeleton-img.compact{max-width:180px}
.skeleton-line{height:12px;background:linear-gradient(90deg,var(--card),var(--glass));border-radius:8px;margin-bottom:8px}
.skeleton-line.title{height:18px;margin-bottom:6px}
.skeleton-chip{background:linear-gradient(90deg,var(--card),var(--glass));border-radius:8px;display:inline-block}
.skeleton-circle{width:32px;height:32px;border-radius:50%;background:linear-gradient(90deg,var(--card),var(--glass))}

/* shimmer animation */
@keyframes shimmer{
  0%{background-position:-150% 0}
  100%{background-position:150% 0}
}
.skeleton-card::after, .skeleton-img::after, .skeleton-line::after, .skeleton-chip::after, .skeleton-circle::after{
  content:"";position:absolute;left:0;top:0;bottom:0;right:0;pointer-events:none;
  background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0) 100%);
  background-repeat:no-repeat;background-size:200% 100%;background-position:-150% 0;mix-blend-mode:overlay;animation:shimmer 1.4s linear infinite;
}

/* Ensure shimmer is subtle on light theme */
.theme-light .skeleton-card::after, .theme-light .skeleton-img::after, .theme-light .skeleton-line::after, .theme-light .skeleton-chip::after, .theme-light .skeleton-circle::after{
  background:linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 50%, rgba(0,0,0,0) 100%);
}

/* Focus styles for accessibility */
.tab:focus-visible, .icon-btn:focus-visible, .chip:focus-visible, .btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px var(--focus-ring);
}